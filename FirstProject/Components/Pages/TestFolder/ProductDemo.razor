@page "/FirstProject/demoproduct"

<h3>ProductDemo</h3>
<div class="row">
	@foreach (var product in ProductList)
	{
		<div class="col-6 border rounded-3 p-3 ">
			<h4>Product-@product.Id</h4>
			Name - @product.Name <br/>
			Price - @product.Price <br />
			Show Properties : <input type="checkbox" @bind="ShowProperties[product.Id]"> <br />
			@if (ShowProperties[product.Id])
			{
				foreach (var property in product.ProductProps)
				{
					<p>@property.Key: @property.Value</p>
				}
			}
		</div>

	}
</div>
@code {
	List<Product> ProductList = new();
	private Dictionary<int, bool> ShowProperties = new();
	protected override void OnInitialized()
	{
		ProductList.Add(new Product
		{
			Id = 1,
			Name = "Midnight Blaze",
			IsActive = false,
			Price = 5.99,
			ProductProps = new List<ProductProp>()
			{
				new() { Id = 1, Key = "Flavor", Value = "Rose"},
				new() { Id = 2, Key = "Size", Value = "20oz"},
				new() { Id = 3, Key = "Color", Value="Purple" }
			}
		});
		ProductList.Add(new Product
		{
			Id = 2,
			Name = "Blossom Lily",
			IsActive = true,
			Price = 10.59,
			ProductProps = new List<ProductProp>()
			{
				new() { Id = 1, Key = "Flavor", Value = "Lily" },
				new() { Id = 2, Key = "Size", Value = "18oz" },
				new() {Id = 3,Key = "Color",Value = "White"}
			}
		});
		if (ProductList is not null)
		{	
			foreach (var product in ProductList)
			{
				ShowProperties.Add(product.Id,false);
			}

		}

	}
}
